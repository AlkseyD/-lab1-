// Цей Jenkinsfile завантажує файл з GitHub та завантажує його в відро S3.

pipeline {

  agent any

  stages {

    // Stage завантаження файлу з GitHub
    stage('Завантажити файл з GitHub') {
      steps {
        // Оновлений код:
        git 'https://github.com/AlkseyD/-lab1-'  // Отримати весь репозиторій
        sh 'mv -f -v -t . new_site.html'       // Перемістити потрібний файл
        echo 'Файл завантажено з GitHub'
      }
    }

    // Stage завантаження файлу в відро S3
    stage('Завантажити файл в відро S3') {
      steps {
        s3Upload(
          bucket: 'jenkins-bucket-for-lab1dovbah',
          region: 'your-aws-region', // Замініть на ваш регіон
          file: 'new_site.html',
          credentialsId: 'your-aws-credentials-id' // Замініть на ID ваших облікових даних
        )
        echo 'Файл завантажено в відро S3'
      }
    }

    // Stage видалення клонованого Git-репозиторію
    stage('Видалити клонований Git-репозиторій') {
      steps {
        deleteDir()
        echo 'Клонований Git-репозиторій видалено'
      }
    }
  }
}
